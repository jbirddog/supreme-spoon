
from SpiffWorkflow.bpmn.serializer.workflow import BpmnWorkflowSerializer
from SpiffWorkflow.bpmn.workflow import BpmnWorkflow
from SpiffWorkflow.spiff.parser.process import SpiffBpmnParser
from SpiffWorkflow.spiff.serializer.task_spec_converters import ManualTaskConverter
from SpiffWorkflow.spiff.serializer.task_spec_converters import ScriptTaskConverter
from SpiffWorkflow.task import TaskState


SERIALIZER_VERSION = "1.0-supreme-spoon"
wf_spec_converter = BpmnWorkflowSerializer.configure_workflow_spec_converter(
    [
        ManualTaskConverter,
        ScriptTaskConverter,
    ]
)
serializer = BpmnWorkflowSerializer(wf_spec_converter, version=SERIALIZER_VERSION)
serialized = {'data': {}, 'last_task': None, 'success': True, 'tasks': {'1ee1019d-c251-4359-985a-2c659f2ce331': {'id': '1ee1019d-c251-4359-985a-2c659f2ce331', 'parent': None, 'children': ['3c052e13-82a4-4065-98e2-bbef9048d903'], 'last_state_change': 1668734678.3058677, 'state': 32, 'task_spec': 'Root', 'triggered': False, 'workflow_name': 'Proccess_3qizfj5', 'internal_data': {}, 'data': {}}, '3c052e13-82a4-4065-98e2-bbef9048d903': {'id': '3c052e13-82a4-4065-98e2-bbef9048d903', 'parent': '1ee1019d-c251-4359-985a-2c659f2ce331', 'children': ['da0b3c93-2ab9-4893-80ab-d6c358cf35af'], 'last_state_change': 1668734678.3061626, 'state': 16, 'task_spec': 'Start', 'triggered': False, 'workflow_name': 'Proccess_3qizfj5', 'internal_data': {}, 'data': {}}, 'da0b3c93-2ab9-4893-80ab-d6c358cf35af': {'id': 'da0b3c93-2ab9-4893-80ab-d6c358cf35af', 'parent': '3c052e13-82a4-4065-98e2-bbef9048d903', 'children': ['d4e0468e-ef43-4a6c-ab88-0062f88d3be9'], 'last_state_change': 1668734678.3058941, 'state': 4, 'task_spec': 'Event_056euq0', 'triggered': False, 'workflow_name': 'Proccess_3qizfj5', 'internal_data': {}, 'data': {}}, 'd4e0468e-ef43-4a6c-ab88-0062f88d3be9': {'id': 'd4e0468e-ef43-4a6c-ab88-0062f88d3be9', 'parent': 'da0b3c93-2ab9-4893-80ab-d6c358cf35af', 'children': ['fd35bf64-9a63-4bb2-a0eb-b5714178b349'], 'last_state_change': 1668734678.3059103, 'state': 4, 'task_spec': 'Activity_0e2pojh', 'triggered': False, 'workflow_name': 'Proccess_3qizfj5', 'internal_data': {}, 'data': {}}, 'fd35bf64-9a63-4bb2-a0eb-b5714178b349': {'id': 'fd35bf64-9a63-4bb2-a0eb-b5714178b349', 'parent': 'd4e0468e-ef43-4a6c-ab88-0062f88d3be9', 'children': ['126fbbc3-1f6a-48ea-8fdb-cd6793c59c9e', 'fd875c2a-1df3-41c4-88ba-7083e56ba373', '478d592f-3741-45f9-9138-bd479fb7d5fb'], 'last_state_change': 1668734678.3059237, 'state': 4, 'task_spec': 'Gateway_017jnp6', 'triggered': False, 'workflow_name': 'Proccess_3qizfj5', 'internal_data': {}, 'data': {}}, '126fbbc3-1f6a-48ea-8fdb-cd6793c59c9e': {'id': '126fbbc3-1f6a-48ea-8fdb-cd6793c59c9e', 'parent': 'fd35bf64-9a63-4bb2-a0eb-b5714178b349', 'children': ['218e94a8-af28-4aae-bbd4-d3f3443a3a53'], 'last_state_change': 1668734678.3059354, 'state': 4, 'task_spec': 'Activity_1ewv0kb', 'triggered': False, 'workflow_name': 'Proccess_3qizfj5', 'internal_data': {}, 'data': {}}, '218e94a8-af28-4aae-bbd4-d3f3443a3a53': {'id': '218e94a8-af28-4aae-bbd4-d3f3443a3a53', 'parent': '126fbbc3-1f6a-48ea-8fdb-cd6793c59c9e', 'children': ['ed4b48ca-8af3-4cb3-9297-538d5422099f'], 'last_state_change': 1668734678.305965, 'state': 4, 'task_spec': 'Gateway_0chrwmq', 'triggered': False, 'workflow_name': 'Proccess_3qizfj5', 'internal_data': {}, 'data': {}}, 'ed4b48ca-8af3-4cb3-9297-538d5422099f': {'id': 'ed4b48ca-8af3-4cb3-9297-538d5422099f', 'parent': '218e94a8-af28-4aae-bbd4-d3f3443a3a53', 'children': ['6917cce7-3231-457e-9cd1-eb201a1849b7'], 'last_state_change': 1668734678.3059747, 'state': 4, 'task_spec': 'Activity_0kapn49', 'triggered': False, 'workflow_name': 'Proccess_3qizfj5', 'internal_data': {}, 'data': {}}, '6917cce7-3231-457e-9cd1-eb201a1849b7': {'id': '6917cce7-3231-457e-9cd1-eb201a1849b7', 'parent': 'ed4b48ca-8af3-4cb3-9297-538d5422099f', 'children': ['312a5f5f-dca0-4bec-87ad-bcf5366126b8'], 'last_state_change': 1668734678.3059833, 'state': 4, 'task_spec': 'Event_1kj6hcj', 'triggered': False, 'workflow_name': 'Proccess_3qizfj5', 'internal_data': {}, 'data': {}}, '312a5f5f-dca0-4bec-87ad-bcf5366126b8': {'id': '312a5f5f-dca0-4bec-87ad-bcf5366126b8', 'parent': '6917cce7-3231-457e-9cd1-eb201a1849b7', 'children': ['316399c2-d519-42ea-90a9-99b488824e25'], 'last_state_change': 1668734678.3059924, 'state': 4, 'task_spec': 'Proccess_3qizfj5.EndJoin', 'triggered': False, 'workflow_name': 'Proccess_3qizfj5', 'internal_data': {}, 'data': {}}, '316399c2-d519-42ea-90a9-99b488824e25': {'id': '316399c2-d519-42ea-90a9-99b488824e25', 'parent': '312a5f5f-dca0-4bec-87ad-bcf5366126b8', 'children': [], 'last_state_change': 1668734678.306002, 'state': 4, 'task_spec': 'End', 'triggered': False, 'workflow_name': 'Proccess_3qizfj5', 'internal_data': {}, 'data': {}}, 'fd875c2a-1df3-41c4-88ba-7083e56ba373': {'id': 'fd875c2a-1df3-41c4-88ba-7083e56ba373', 'parent': 'fd35bf64-9a63-4bb2-a0eb-b5714178b349', 'children': ['2f62dfd3-5dca-49dd-95ff-52794d5f9b71'], 'last_state_change': 1668734678.3059418, 'state': 4, 'task_spec': 'Activity_115woll', 'triggered': False, 'workflow_name': 'Proccess_3qizfj5', 'internal_data': {}, 'data': {}}, '2f62dfd3-5dca-49dd-95ff-52794d5f9b71': {'id': '2f62dfd3-5dca-49dd-95ff-52794d5f9b71', 'parent': 'fd875c2a-1df3-41c4-88ba-7083e56ba373', 'children': ['75d2ab62-7f66-4d45-abfb-382b02256e44'], 'last_state_change': 1668734678.3060129, 'state': 4, 'task_spec': 'Gateway_0chrwmq', 'triggered': False, 'workflow_name': 'Proccess_3qizfj5', 'internal_data': {}, 'data': {}}, '75d2ab62-7f66-4d45-abfb-382b02256e44': {'id': '75d2ab62-7f66-4d45-abfb-382b02256e44', 'parent': '2f62dfd3-5dca-49dd-95ff-52794d5f9b71', 'children': ['a7a29924-306b-4c68-8efe-14e81e97bea2'], 'last_state_change': 1668734678.3060203, 'state': 4, 'task_spec': 'Activity_0kapn49', 'triggered': False, 'workflow_name': 'Proccess_3qizfj5', 'internal_data': {}, 'data': {}}, 'a7a29924-306b-4c68-8efe-14e81e97bea2': {'id': 'a7a29924-306b-4c68-8efe-14e81e97bea2', 'parent': '75d2ab62-7f66-4d45-abfb-382b02256e44', 'children': ['95b31ef9-9df0-4df6-b1f3-17adf83068e3'], 'last_state_change': 1668734678.3060281, 'state': 4, 'task_spec': 'Event_1kj6hcj', 'triggered': False, 'workflow_name': 'Proccess_3qizfj5', 'internal_data': {}, 'data': {}}, '95b31ef9-9df0-4df6-b1f3-17adf83068e3': {'id': '95b31ef9-9df0-4df6-b1f3-17adf83068e3', 'parent': 'a7a29924-306b-4c68-8efe-14e81e97bea2', 'children': ['470a5fc1-8a00-4776-b920-bb4b2d424246'], 'last_state_change': 1668734678.3060358, 'state': 4, 'task_spec': 'Proccess_3qizfj5.EndJoin', 'triggered': False, 'workflow_name': 'Proccess_3qizfj5', 'internal_data': {}, 'data': {}}, '470a5fc1-8a00-4776-b920-bb4b2d424246': {'id': '470a5fc1-8a00-4776-b920-bb4b2d424246', 'parent': '95b31ef9-9df0-4df6-b1f3-17adf83068e3', 'children': [], 'last_state_change': 1668734678.306046, 'state': 4, 'task_spec': 'End', 'triggered': False, 'workflow_name': 'Proccess_3qizfj5', 'internal_data': {}, 'data': {}}, '478d592f-3741-45f9-9138-bd479fb7d5fb': {'id': '478d592f-3741-45f9-9138-bd479fb7d5fb', 'parent': 'fd35bf64-9a63-4bb2-a0eb-b5714178b349', 'children': ['73d28ee9-9229-4e1f-8cc5-69998f8696de'], 'last_state_change': 1668734678.3059504, 'state': 4, 'task_spec': 'Activity_1g1cdox', 'triggered': False, 'workflow_name': 'Proccess_3qizfj5', 'internal_data': {}, 'data': {}}, '73d28ee9-9229-4e1f-8cc5-69998f8696de': {'id': '73d28ee9-9229-4e1f-8cc5-69998f8696de', 'parent': '478d592f-3741-45f9-9138-bd479fb7d5fb', 'children': ['0b644d06-dbd2-4a74-9921-e9a43ad65d33'], 'last_state_change': 1668734678.3060558, 'state': 4, 'task_spec': 'Gateway_0chrwmq', 'triggered': False, 'workflow_name': 'Proccess_3qizfj5', 'internal_data': {}, 'data': {}}, '0b644d06-dbd2-4a74-9921-e9a43ad65d33': {'id': '0b644d06-dbd2-4a74-9921-e9a43ad65d33', 'parent': '73d28ee9-9229-4e1f-8cc5-69998f8696de', 'children': ['2bf74cae-1174-48b1-a6a8-a26413d22bfd'], 'last_state_change': 1668734678.3060632, 'state': 4, 'task_spec': 'Activity_0kapn49', 'triggered': False, 'workflow_name': 'Proccess_3qizfj5', 'internal_data': {}, 'data': {}}, '2bf74cae-1174-48b1-a6a8-a26413d22bfd': {'id': '2bf74cae-1174-48b1-a6a8-a26413d22bfd', 'parent': '0b644d06-dbd2-4a74-9921-e9a43ad65d33', 'children': ['fdfeaa97-166c-4fbf-ad3e-a741a1fb9e10'], 'last_state_change': 1668734678.3060703, 'state': 4, 'task_spec': 'Event_1kj6hcj', 'triggered': False, 'workflow_name': 'Proccess_3qizfj5', 'internal_data': {}, 'data': {}}, 'fdfeaa97-166c-4fbf-ad3e-a741a1fb9e10': {'id': 'fdfeaa97-166c-4fbf-ad3e-a741a1fb9e10', 'parent': '2bf74cae-1174-48b1-a6a8-a26413d22bfd', 'children': ['2b5ee984-7aff-448e-9fb1-01a71163c67a'], 'last_state_change': 1668734678.306078, 'state': 4, 'task_spec': 'Proccess_3qizfj5.EndJoin', 'triggered': False, 'workflow_name': 'Proccess_3qizfj5', 'internal_data': {}, 'data': {}}, '2b5ee984-7aff-448e-9fb1-01a71163c67a': {'id': '2b5ee984-7aff-448e-9fb1-01a71163c67a', 'parent': 'fdfeaa97-166c-4fbf-ad3e-a741a1fb9e10', 'children': [], 'last_state_change': 1668734678.3060853, 'state': 4, 'task_spec': 'End', 'triggered': False, 'workflow_name': 'Proccess_3qizfj5', 'internal_data': {}, 'data': {}}}, 'root': '1ee1019d-c251-4359-985a-2c659f2ce331', 'spec': {'name': 'Proccess_3qizfj5', 'description': 'Proccess_3qizfj5', 'file': 'old_examples/man_pg.bpmn', 'task_specs': {'Start': {'id': 'Proccess_3qizfj5_1', 'name': 'Start', 'description': '', 'manual': False, 'internal': False, 'lookahead': 2, 'inputs': [], 'outputs': ['Event_056euq0'], 'typename': 'StartTask'}, 'Proccess_3qizfj5.EndJoin': {'id': 'Proccess_3qizfj5_2', 'name': 'Proccess_3qizfj5.EndJoin', 'description': '', 'manual': False, 'internal': False, 'lookahead': 2, 'inputs': ['Event_1kj6hcj'], 'outputs': ['End'], 'typename': '_EndJoin'}, 'End': {'id': 'Proccess_3qizfj5_3', 'name': 'End', 'description': '', 'manual': False, 'internal': False, 'lookahead': 2, 'inputs': ['Proccess_3qizfj5.EndJoin'], 'outputs': [], 'typename': 'Simple'}, 'Event_056euq0': {'id': 'Proccess_3qizfj5_4', 'name': 'Event_056euq0', 'description': None, 'manual': False, 'internal': False, 'lookahead': 2, 'inputs': ['Start'], 'outputs': ['Activity_0e2pojh'], 'lane': None, 'documentation': None, 'loopTask': False, 'position': {'x': 22.0, 'y': 162.0}, 'outgoing_sequence_flows': {'Activity_0e2pojh': {'id': 'Flow_1cl1p98', 'name': None, 'documentation': None, 'target_task_spec': 'Activity_0e2pojh', 'typename': 'SequenceFlow'}}, 'outgoing_sequence_flows_by_id': {'Flow_1cl1p98': {'id': 'Flow_1cl1p98', 'name': None, 'documentation': None, 'target_task_spec': 'Activity_0e2pojh', 'typename': 'SequenceFlow'}}, 'data_input_associations': [], 'data_output_associations': [], 'event_definition': {'internal': False, 'external': False, 'typename': 'NoneEventDefinition'}, 'typename': 'StartEvent', 'extensions': {}}, 'Activity_0e2pojh': {'id': 'Proccess_3qizfj5_5', 'name': 'Activity_0e2pojh', 'description': None, 'manual': False, 'internal': False, 'lookahead': 2, 'inputs': ['Event_056euq0'], 'outputs': ['Gateway_017jnp6'], 'lane': None, 'documentation': None, 'loopTask': False, 'position': {'x': 80.0, 'y': 140.0}, 'outgoing_sequence_flows': {'Gateway_017jnp6': {'id': 'Flow_06e9ehh', 'name': None, 'documentation': None, 'target_task_spec': 'Gateway_017jnp6', 'typename': 'SequenceFlow'}}, 'outgoing_sequence_flows_by_id': {'Flow_06e9ehh': {'id': 'Flow_06e9ehh', 'name': None, 'documentation': None, 'target_task_spec': 'Gateway_017jnp6', 'typename': 'SequenceFlow'}}, 'data_input_associations': [], 'data_output_associations': [], 'prescript': None, 'postscript': None, 'typename': 'ManualTask', 'extensions': {'instructionsForEndUser': 'Press any key to continue the demo....'}}, 'Gateway_017jnp6': {'id': 'Proccess_3qizfj5_6', 'name': 'Gateway_017jnp6', 'description': None, 'manual': False, 'internal': False, 'lookahead': 2, 'inputs': ['Activity_0e2pojh'], 'outputs': ['Activity_1ewv0kb', 'Activity_115woll', 'Activity_1g1cdox'], 'lane': None, 'documentation': None, 'loopTask': False, 'position': {'x': 205.0, 'y': 155.0}, 'outgoing_sequence_flows': {'Activity_1ewv0kb': {'id': 'Flow_1pitxjc', 'name': None, 'documentation': None, 'target_task_spec': 'Activity_1ewv0kb', 'typename': 'SequenceFlow'}, 'Activity_115woll': {'id': 'Flow_0h2b3iu', 'name': None, 'documentation': None, 'target_task_spec': 'Activity_115woll', 'typename': 'SequenceFlow'}, 'Activity_1g1cdox': {'id': 'Flow_02o1fhb', 'name': None, 'documentation': None, 'target_task_spec': 'Activity_1g1cdox', 'typename': 'SequenceFlow'}}, 'outgoing_sequence_flows_by_id': {'Flow_1pitxjc': {'id': 'Flow_1pitxjc', 'name': None, 'documentation': None, 'target_task_spec': 'Activity_1ewv0kb', 'typename': 'SequenceFlow'}, 'Flow_0h2b3iu': {'id': 'Flow_0h2b3iu', 'name': None, 'documentation': None, 'target_task_spec': 'Activity_115woll', 'typename': 'SequenceFlow'}, 'Flow_02o1fhb': {'id': 'Flow_02o1fhb', 'name': None, 'documentation': None, 'target_task_spec': 'Activity_1g1cdox', 'typename': 'SequenceFlow'}}, 'data_input_associations': [], 'data_output_associations': [], 'split_task': None, 'threshold': None, 'cancel': False, 'typename': 'ParallelGateway', 'extensions': {}}, 'Activity_1ewv0kb': {'id': 'Proccess_3qizfj5_7', 'name': 'Activity_1ewv0kb', 'description': None, 'manual': False, 'internal': False, 'lookahead': 2, 'inputs': ['Gateway_017jnp6'], 'outputs': ['Gateway_0chrwmq'], 'lane': None, 'documentation': None, 'loopTask': False, 'position': {'x': 300.0, 'y': 30.0}, 'outgoing_sequence_flows': {'Gateway_0chrwmq': {'id': 'Flow_0iqfly5', 'name': None, 'documentation': None, 'target_task_spec': 'Gateway_0chrwmq', 'typename': 'SequenceFlow'}}, 'outgoing_sequence_flows_by_id': {'Flow_0iqfly5': {'id': 'Flow_0iqfly5', 'name': None, 'documentation': None, 'target_task_spec': 'Gateway_0chrwmq', 'typename': 'SequenceFlow'}}, 'data_input_associations': [], 'data_output_associations': [], 'prescript': None, 'postscript': None, 'script': 'var1=4', 'typename': 'ScriptTask', 'extensions': {}}, 'Gateway_0chrwmq': {'id': 'Proccess_3qizfj5_8', 'name': 'Gateway_0chrwmq', 'description': None, 'manual': False, 'internal': False, 'lookahead': 2, 'inputs': ['Activity_1ewv0kb', 'Activity_115woll', 'Activity_1g1cdox'], 'outputs': ['Activity_0kapn49'], 'lane': None, 'documentation': None, 'loopTask': False, 'position': {'x': 445.0, 'y': 155.0}, 'outgoing_sequence_flows': {'Activity_0kapn49': {'id': 'Flow_19o9wjn', 'name': None, 'documentation': None, 'target_task_spec': 'Activity_0kapn49', 'typename': 'SequenceFlow'}}, 'outgoing_sequence_flows_by_id': {'Flow_19o9wjn': {'id': 'Flow_19o9wjn', 'name': None, 'documentation': None, 'target_task_spec': 'Activity_0kapn49', 'typename': 'SequenceFlow'}}, 'data_input_associations': [], 'data_output_associations': [], 'split_task': None, 'threshold': None, 'cancel': False, 'typename': 'ParallelGateway', 'extensions': {}}, 'Activity_0kapn49': {'id': 'Proccess_3qizfj5_9', 'name': 'Activity_0kapn49', 'description': None, 'manual': False, 'internal': False, 'lookahead': 2, 'inputs': ['Gateway_0chrwmq'], 'outputs': ['Event_1kj6hcj'], 'lane': None, 'documentation': None, 'loopTask': False, 'position': {'x': 590.0, 'y': 140.0}, 'outgoing_sequence_flows': {'Event_1kj6hcj': {'id': 'Flow_0xt37g5', 'name': None, 'documentation': None, 'target_task_spec': 'Event_1kj6hcj', 'typename': 'SequenceFlow'}}, 'outgoing_sequence_flows_by_id': {'Flow_0xt37g5': {'id': 'Flow_0xt37g5', 'name': None, 'documentation': None, 'target_task_spec': 'Event_1kj6hcj', 'typename': 'SequenceFlow'}}, 'data_input_associations': [], 'data_output_associations': [], 'prescript': None, 'postscript': None, 'script': 'result = var1 + 77', 'typename': 'ScriptTask', 'extensions': {}}, 'Event_1kj6hcj': {'id': 'Proccess_3qizfj5_10', 'name': 'Event_1kj6hcj', 'description': None, 'manual': False, 'internal': False, 'lookahead': 2, 'inputs': ['Activity_0kapn49'], 'outputs': ['Proccess_3qizfj5.EndJoin'], 'lane': None, 'documentation': None, 'loopTask': False, 'position': {'x': 792.0, 'y': 162.0}, 'outgoing_sequence_flows': {'Proccess_3qizfj5.EndJoin': {'id': 'Event_1kj6hcj.ToEndJoin', 'name': None, 'documentation': None, 'target_task_spec': 'Proccess_3qizfj5.EndJoin', 'typename': 'SequenceFlow'}}, 'outgoing_sequence_flows_by_id': {'Event_1kj6hcj.ToEndJoin': {'id': 'Event_1kj6hcj.ToEndJoin', 'name': None, 'documentation': None, 'target_task_spec': 'Proccess_3qizfj5.EndJoin', 'typename': 'SequenceFlow'}}, 'data_input_associations': [], 'data_output_associations': [], 'event_definition': {'internal': False, 'external': False, 'typename': 'NoneEventDefinition'}, 'typename': 'EndEvent', 'extensions': {}}, 'Activity_115woll': {'id': 'Proccess_3qizfj5_11', 'name': 'Activity_115woll', 'description': None, 'manual': False, 'internal': False, 'lookahead': 2, 'inputs': ['Gateway_017jnp6'], 'outputs': ['Gateway_0chrwmq'], 'lane': None, 'documentation': None, 'loopTask': False, 'position': {'x': 300.0, 'y': 140.0}, 'outgoing_sequence_flows': {'Gateway_0chrwmq': {'id': 'Flow_1iiolp4', 'name': None, 'documentation': None, 'target_task_spec': 'Gateway_0chrwmq', 'typename': 'SequenceFlow'}}, 'outgoing_sequence_flows_by_id': {'Flow_1iiolp4': {'id': 'Flow_1iiolp4', 'name': None, 'documentation': None, 'target_task_spec': 'Gateway_0chrwmq', 'typename': 'SequenceFlow'}}, 'data_input_associations': [], 'data_output_associations': [], 'prescript': None, 'postscript': None, 'script': 'var1=6', 'typename': 'ScriptTask', 'extensions': {}}, 'Activity_1g1cdox': {'id': 'Proccess_3qizfj5_12', 'name': 'Activity_1g1cdox', 'description': None, 'manual': False, 'internal': False, 'lookahead': 2, 'inputs': ['Gateway_017jnp6'], 'outputs': ['Gateway_0chrwmq'], 'lane': None, 'documentation': None, 'loopTask': False, 'position': {'x': 300.0, 'y': 250.0}, 'outgoing_sequence_flows': {'Gateway_0chrwmq': {'id': 'Flow_110tzrd', 'name': None, 'documentation': None, 'target_task_spec': 'Gateway_0chrwmq', 'typename': 'SequenceFlow'}}, 'outgoing_sequence_flows_by_id': {'Flow_110tzrd': {'id': 'Flow_110tzrd', 'name': None, 'documentation': None, 'target_task_spec': 'Gateway_0chrwmq', 'typename': 'SequenceFlow'}}, 'data_input_associations': [], 'data_output_associations': [], 'prescript': None, 'postscript': None, 'script': 'var1=7', 'typename': 'ScriptTask', 'extensions': {}}, 'Root': {'id': 'Proccess_3qizfj5_13', 'name': 'Root', 'description': '', 'manual': False, 'internal': False, 'lookahead': 2, 'inputs': [], 'outputs': [], 'typename': 'Simple'}}, 'data_inputs': [], 'data_outputs': [], 'data_objects': {}, 'correlation_keys': {}, 'typename': 'BpmnProcessSpec'}, 'subprocess_specs': {'Proccess_3qizfj5': {'name': 'Proccess_3qizfj5', 'description': 'Proccess_3qizfj5', 'file': 'old_examples/man_pg.bpmn', 'task_specs': {'Start': {'id': 'Proccess_3qizfj5_1', 'name': 'Start', 'description': '', 'manual': False, 'internal': False, 'lookahead': 2, 'inputs': [], 'outputs': ['Event_056euq0'], 'typename': 'StartTask'}, 'Proccess_3qizfj5.EndJoin': {'id': 'Proccess_3qizfj5_2', 'name': 'Proccess_3qizfj5.EndJoin', 'description': '', 'manual': False, 'internal': False, 'lookahead': 2, 'inputs': ['Event_1kj6hcj'], 'outputs': ['End'], 'typename': '_EndJoin'}, 'End': {'id': 'Proccess_3qizfj5_3', 'name': 'End', 'description': '', 'manual': False, 'internal': False, 'lookahead': 2, 'inputs': ['Proccess_3qizfj5.EndJoin'], 'outputs': [], 'typename': 'Simple'}, 'Event_056euq0': {'id': 'Proccess_3qizfj5_4', 'name': 'Event_056euq0', 'description': None, 'manual': False, 'internal': False, 'lookahead': 2, 'inputs': ['Start'], 'outputs': ['Activity_0e2pojh'], 'lane': None, 'documentation': None, 'loopTask': False, 'position': {'x': 22.0, 'y': 162.0}, 'outgoing_sequence_flows': {'Activity_0e2pojh': {'id': 'Flow_1cl1p98', 'name': None, 'documentation': None, 'target_task_spec': 'Activity_0e2pojh', 'typename': 'SequenceFlow'}}, 'outgoing_sequence_flows_by_id': {'Flow_1cl1p98': {'id': 'Flow_1cl1p98', 'name': None, 'documentation': None, 'target_task_spec': 'Activity_0e2pojh', 'typename': 'SequenceFlow'}}, 'data_input_associations': [], 'data_output_associations': [], 'event_definition': {'internal': False, 'external': False, 'typename': 'NoneEventDefinition'}, 'typename': 'StartEvent', 'extensions': {}}, 'Activity_0e2pojh': {'id': 'Proccess_3qizfj5_5', 'name': 'Activity_0e2pojh', 'description': None, 'manual': False, 'internal': False, 'lookahead': 2, 'inputs': ['Event_056euq0'], 'outputs': ['Gateway_017jnp6'], 'lane': None, 'documentation': None, 'loopTask': False, 'position': {'x': 80.0, 'y': 140.0}, 'outgoing_sequence_flows': {'Gateway_017jnp6': {'id': 'Flow_06e9ehh', 'name': None, 'documentation': None, 'target_task_spec': 'Gateway_017jnp6', 'typename': 'SequenceFlow'}}, 'outgoing_sequence_flows_by_id': {'Flow_06e9ehh': {'id': 'Flow_06e9ehh', 'name': None, 'documentation': None, 'target_task_spec': 'Gateway_017jnp6', 'typename': 'SequenceFlow'}}, 'data_input_associations': [], 'data_output_associations': [], 'prescript': None, 'postscript': None, 'typename': 'ManualTask', 'extensions': {'instructionsForEndUser': 'Press any key to continue the demo....'}}, 'Gateway_017jnp6': {'id': 'Proccess_3qizfj5_6', 'name': 'Gateway_017jnp6', 'description': None, 'manual': False, 'internal': False, 'lookahead': 2, 'inputs': ['Activity_0e2pojh'], 'outputs': ['Activity_1ewv0kb', 'Activity_115woll', 'Activity_1g1cdox'], 'lane': None, 'documentation': None, 'loopTask': False, 'position': {'x': 205.0, 'y': 155.0}, 'outgoing_sequence_flows': {'Activity_1ewv0kb': {'id': 'Flow_1pitxjc', 'name': None, 'documentation': None, 'target_task_spec': 'Activity_1ewv0kb', 'typename': 'SequenceFlow'}, 'Activity_115woll': {'id': 'Flow_0h2b3iu', 'name': None, 'documentation': None, 'target_task_spec': 'Activity_115woll', 'typename': 'SequenceFlow'}, 'Activity_1g1cdox': {'id': 'Flow_02o1fhb', 'name': None, 'documentation': None, 'target_task_spec': 'Activity_1g1cdox', 'typename': 'SequenceFlow'}}, 'outgoing_sequence_flows_by_id': {'Flow_1pitxjc': {'id': 'Flow_1pitxjc', 'name': None, 'documentation': None, 'target_task_spec': 'Activity_1ewv0kb', 'typename': 'SequenceFlow'}, 'Flow_0h2b3iu': {'id': 'Flow_0h2b3iu', 'name': None, 'documentation': None, 'target_task_spec': 'Activity_115woll', 'typename': 'SequenceFlow'}, 'Flow_02o1fhb': {'id': 'Flow_02o1fhb', 'name': None, 'documentation': None, 'target_task_spec': 'Activity_1g1cdox', 'typename': 'SequenceFlow'}}, 'data_input_associations': [], 'data_output_associations': [], 'split_task': None, 'threshold': None, 'cancel': False, 'typename': 'ParallelGateway', 'extensions': {}}, 'Activity_1ewv0kb': {'id': 'Proccess_3qizfj5_7', 'name': 'Activity_1ewv0kb', 'description': None, 'manual': False, 'internal': False, 'lookahead': 2, 'inputs': ['Gateway_017jnp6'], 'outputs': ['Gateway_0chrwmq'], 'lane': None, 'documentation': None, 'loopTask': False, 'position': {'x': 300.0, 'y': 30.0}, 'outgoing_sequence_flows': {'Gateway_0chrwmq': {'id': 'Flow_0iqfly5', 'name': None, 'documentation': None, 'target_task_spec': 'Gateway_0chrwmq', 'typename': 'SequenceFlow'}}, 'outgoing_sequence_flows_by_id': {'Flow_0iqfly5': {'id': 'Flow_0iqfly5', 'name': None, 'documentation': None, 'target_task_spec': 'Gateway_0chrwmq', 'typename': 'SequenceFlow'}}, 'data_input_associations': [], 'data_output_associations': [], 'prescript': None, 'postscript': None, 'script': 'var1=4', 'typename': 'ScriptTask', 'extensions': {}}, 'Gateway_0chrwmq': {'id': 'Proccess_3qizfj5_8', 'name': 'Gateway_0chrwmq', 'description': None, 'manual': False, 'internal': False, 'lookahead': 2, 'inputs': ['Activity_1ewv0kb', 'Activity_115woll', 'Activity_1g1cdox'], 'outputs': ['Activity_0kapn49'], 'lane': None, 'documentation': None, 'loopTask': False, 'position': {'x': 445.0, 'y': 155.0}, 'outgoing_sequence_flows': {'Activity_0kapn49': {'id': 'Flow_19o9wjn', 'name': None, 'documentation': None, 'target_task_spec': 'Activity_0kapn49', 'typename': 'SequenceFlow'}}, 'outgoing_sequence_flows_by_id': {'Flow_19o9wjn': {'id': 'Flow_19o9wjn', 'name': None, 'documentation': None, 'target_task_spec': 'Activity_0kapn49', 'typename': 'SequenceFlow'}}, 'data_input_associations': [], 'data_output_associations': [], 'split_task': None, 'threshold': None, 'cancel': False, 'typename': 'ParallelGateway', 'extensions': {}}, 'Activity_0kapn49': {'id': 'Proccess_3qizfj5_9', 'name': 'Activity_0kapn49', 'description': None, 'manual': False, 'internal': False, 'lookahead': 2, 'inputs': ['Gateway_0chrwmq'], 'outputs': ['Event_1kj6hcj'], 'lane': None, 'documentation': None, 'loopTask': False, 'position': {'x': 590.0, 'y': 140.0}, 'outgoing_sequence_flows': {'Event_1kj6hcj': {'id': 'Flow_0xt37g5', 'name': None, 'documentation': None, 'target_task_spec': 'Event_1kj6hcj', 'typename': 'SequenceFlow'}}, 'outgoing_sequence_flows_by_id': {'Flow_0xt37g5': {'id': 'Flow_0xt37g5', 'name': None, 'documentation': None, 'target_task_spec': 'Event_1kj6hcj', 'typename': 'SequenceFlow'}}, 'data_input_associations': [], 'data_output_associations': [], 'prescript': None, 'postscript': None, 'script': 'result = var1 + 77', 'typename': 'ScriptTask', 'extensions': {}}, 'Event_1kj6hcj': {'id': 'Proccess_3qizfj5_10', 'name': 'Event_1kj6hcj', 'description': None, 'manual': False, 'internal': False, 'lookahead': 2, 'inputs': ['Activity_0kapn49'], 'outputs': ['Proccess_3qizfj5.EndJoin'], 'lane': None, 'documentation': None, 'loopTask': False, 'position': {'x': 792.0, 'y': 162.0}, 'outgoing_sequence_flows': {'Proccess_3qizfj5.EndJoin': {'id': 'Event_1kj6hcj.ToEndJoin', 'name': None, 'documentation': None, 'target_task_spec': 'Proccess_3qizfj5.EndJoin', 'typename': 'SequenceFlow'}}, 'outgoing_sequence_flows_by_id': {'Event_1kj6hcj.ToEndJoin': {'id': 'Event_1kj6hcj.ToEndJoin', 'name': None, 'documentation': None, 'target_task_spec': 'Proccess_3qizfj5.EndJoin', 'typename': 'SequenceFlow'}}, 'data_input_associations': [], 'data_output_associations': [], 'event_definition': {'internal': False, 'external': False, 'typename': 'NoneEventDefinition'}, 'typename': 'EndEvent', 'extensions': {}}, 'Activity_115woll': {'id': 'Proccess_3qizfj5_11', 'name': 'Activity_115woll', 'description': None, 'manual': False, 'internal': False, 'lookahead': 2, 'inputs': ['Gateway_017jnp6'], 'outputs': ['Gateway_0chrwmq'], 'lane': None, 'documentation': None, 'loopTask': False, 'position': {'x': 300.0, 'y': 140.0}, 'outgoing_sequence_flows': {'Gateway_0chrwmq': {'id': 'Flow_1iiolp4', 'name': None, 'documentation': None, 'target_task_spec': 'Gateway_0chrwmq', 'typename': 'SequenceFlow'}}, 'outgoing_sequence_flows_by_id': {'Flow_1iiolp4': {'id': 'Flow_1iiolp4', 'name': None, 'documentation': None, 'target_task_spec': 'Gateway_0chrwmq', 'typename': 'SequenceFlow'}}, 'data_input_associations': [], 'data_output_associations': [], 'prescript': None, 'postscript': None, 'script': 'var1=6', 'typename': 'ScriptTask', 'extensions': {}}, 'Activity_1g1cdox': {'id': 'Proccess_3qizfj5_12', 'name': 'Activity_1g1cdox', 'description': None, 'manual': False, 'internal': False, 'lookahead': 2, 'inputs': ['Gateway_017jnp6'], 'outputs': ['Gateway_0chrwmq'], 'lane': None, 'documentation': None, 'loopTask': False, 'position': {'x': 300.0, 'y': 250.0}, 'outgoing_sequence_flows': {'Gateway_0chrwmq': {'id': 'Flow_110tzrd', 'name': None, 'documentation': None, 'target_task_spec': 'Gateway_0chrwmq', 'typename': 'SequenceFlow'}}, 'outgoing_sequence_flows_by_id': {'Flow_110tzrd': {'id': 'Flow_110tzrd', 'name': None, 'documentation': None, 'target_task_spec': 'Gateway_0chrwmq', 'typename': 'SequenceFlow'}}, 'data_input_associations': [], 'data_output_associations': [], 'prescript': None, 'postscript': None, 'script': 'var1=7', 'typename': 'ScriptTask', 'extensions': {}}, 'Root': {'id': 'Proccess_3qizfj5_13', 'name': 'Root', 'description': '', 'manual': False, 'internal': False, 'lookahead': 2, 'inputs': [], 'outputs': [], 'typename': 'Simple'}}, 'data_inputs': [], 'data_outputs': [], 'data_objects': {}, 'correlation_keys': {}, 'typename': 'BpmnProcessSpec'}}, 'subprocesses': {}, 'bpmn_messages': []}

wf = serializer.workflow_from_dict(serialized)
wf.do_engine_steps()

while not wf.is_completed():
    ready_tasks = wf.get_ready_user_tasks()
    for task in ready_tasks:
        task.complete()
    wf.refresh_waiting_tasks()
    wf.do_engine_steps()

print(wf.data)
